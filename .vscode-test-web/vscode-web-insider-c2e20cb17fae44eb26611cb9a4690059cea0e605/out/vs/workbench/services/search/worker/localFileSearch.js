/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ue=["require","exports","vs/base/common/path","vs/base/common/platform","vs/base/common/strings","vs/base/common/extpath","vs/base/common/charCode","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],he=function(Q){for(var e=[],k=0,v=Q.length;k<v;k++)e[k]=ue[Q[k]];return e};define(ue[11],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$he=void 0,e.$he=Symbol("MicrotaskDelay")}),define(ue[5],he([0,1,6,2,3,4,17]),function(Q,e,k,v,R,g,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$xg=y,e.$yg=K,e.$zg=L,e.$Ag=z,e.$Bg=p,e.$Cg=n,e.$Dg=c,e.$Eg=d,e.$Fg=D,e.$Gg=f,e.$Hg=j,e.$Ig=J,e.$Jg=P,e.$Kg=F,e.$Lg=S,e.$Mg=H,e.$Ng=V;function y(s){return s===k.CharCode.Slash||s===k.CharCode.Backslash}function K(s){return s.replace(/[\\/]/g,v.$ic.sep)}function L(s){return s.indexOf("/")===-1&&(s=K(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function z(s,$=v.$ic.sep){if(!s)return"";const B=s.length,U=s.charCodeAt(0);if(y(U)){if(y(s.charCodeAt(1))&&!y(s.charCodeAt(2))){let q=3;const Y=q;for(;q<B&&!y(s.charCodeAt(q));q++);if(Y!==q&&!y(s.charCodeAt(q+1))){for(q+=1;q<B;q++)if(y(s.charCodeAt(q)))return s.slice(0,q+1).replace(/[\\/]/g,$)}}return $}else if(D(U)&&s.charCodeAt(1)===k.CharCode.Colon)return y(s.charCodeAt(2))?s.slice(0,2)+$:s.slice(0,2);let G=s.indexOf("://");if(G!==-1){for(G+=3;G<B;G++)if(y(s.charCodeAt(G)))return s.slice(0,G+1)}return""}function p(s){if(!R.$i||!s||s.length<5)return!1;let $=s.charCodeAt(0);if($!==k.CharCode.Backslash||($=s.charCodeAt(1),$!==k.CharCode.Backslash))return!1;let B=2;const U=B;for(;B<s.length&&($=s.charCodeAt(B),$!==k.CharCode.Backslash);B++);return!(U===B||($=s.charCodeAt(B+1),isNaN($)||$===k.CharCode.Backslash))}const X=/[\\/:\*\?"<>\|]/g,te=/[/]/g,l=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function n(s,$=R.$i){const B=$?X:te;return!(!s||s.length===0||/^\s+$/.test(s)||(B.lastIndex=0,B.test(s))||$&&l.test(s)||s==="."||s===".."||$&&s[s.length-1]==="."||$&&s.length!==s.trim().length||s.length>255)}function c(s,$,B){const U=s===$;return!B||U?U:!s||!$?!1:(0,g.$Gf)(s,$)}function d(s,$,B,U=v.sep){if(s===$)return!0;if(!s||!$||$.length>s.length)return!1;if(B){if(!(0,g.$Hf)(s,$))return!1;if($.length===s.length)return!0;let q=$.length;return $.charAt($.length-1)===U&&q--,s.charAt(q)===U}return $.charAt($.length-1)!==U&&($+=U),s.indexOf($)===0}function D(s){return s>=k.CharCode.A&&s<=k.CharCode.Z||s>=k.CharCode.a&&s<=k.CharCode.z}function f(s,$){return R.$i&&s.endsWith(":")&&(s+=v.sep),(0,v.$kc)(s)||(s=(0,v.$lc)($,s)),s=(0,v.$jc)(s),j(s)}function j(s){return R.$i?(s=(0,g.$of)(s,v.sep),s.endsWith(":")&&(s+=v.sep)):(s=(0,g.$of)(s,v.sep),s||(s=v.sep)),s}function J(s){const $=(0,v.$jc)(s);return R.$i?s.length>3?!1:P($)&&(s.length===2||$.charCodeAt(2)===k.CharCode.Backslash):$===v.$ic.sep}function P(s,$=R.$i){return $?D(s.charCodeAt(0))&&s.charCodeAt(1)===k.CharCode.Colon:!1}function F(s,$=R.$i){return P(s,$)?s[0]:void 0}function S(s,$,B){return $.length>s.length?-1:s===$?0:(B&&(s=s.toLowerCase(),$=$.toLowerCase()),s.indexOf($))}function H(s){const $=s.split(":");let B,U,G;for(const q of $){const Y=Number(q);(0,E.$jg)(Y)?U===void 0?U=Y:G===void 0&&(G=Y):B=B?[B,q].join(":"):q}if(!B)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:B,line:U!==void 0?U:void 0,column:G!==void 0?G:U!==void 0?1:void 0}}const ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function V(s,$,B=8){let U="";for(let q=0;q<B;q++){let Y;q===0&&R.$i&&!$&&(B===3||B===4)?Y=_:Y=ee,U+=Y.charAt(Math.floor(Math.random()*Y.length))}let G;return $?G=`${$}-${U}`:G=U,s?(0,v.$lc)(s,G):G}});var $e=this&&this.__createBinding||(Object.create?function(Q,e,k,v){v===void 0&&(v=k);var R=Object.getOwnPropertyDescriptor(e,k);(!R||("get"in R?!e.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return e[k]}}),Object.defineProperty(Q,v,R)}:function(Q,e,k,v){v===void 0&&(v=k),Q[v]=e[k]}),me=this&&this.__setModuleDefault||(Object.create?function(Q,e){Object.defineProperty(Q,"default",{enumerable:!0,value:e})}:function(Q,e){Q.default=e}),de=this&&this.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var e={};if(Q!=null)for(var k in Q)k!=="default"&&Object.prototype.hasOwnProperty.call(Q,k)&&$e(e,Q,k);return me(e,Q),e};define(ue[12],he([0,1,13,3,4,7,2]),function(Q,e,k,v,R,g,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Ug=e.$Sg=e.$Rg=e.$Qg=e.Schemas=void 0,e.$Og=K,e.$Pg=L,e.$Tg=p,k=de(k),v=de(v),E=de(E);var y;(function(l){l.inMemory="inmemory",l.vscode="vscode",l.internal="private",l.walkThrough="walkThrough",l.walkThroughSnippet="walkThroughSnippet",l.http="http",l.https="https",l.file="file",l.mailto="mailto",l.untitled="untitled",l.data="data",l.command="command",l.vscodeRemote="vscode-remote",l.vscodeRemoteResource="vscode-remote-resource",l.vscodeManagedRemoteResource="vscode-managed-remote-resource",l.vscodeUserData="vscode-userdata",l.vscodeCustomEditor="vscode-custom-editor",l.vscodeNotebookCell="vscode-notebook-cell",l.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",l.vscodeNotebookCellOutput="vscode-notebook-cell-output",l.vscodeInteractiveInput="vscode-interactive-input",l.vscodeSettings="vscode-settings",l.vscodeWorkspaceTrust="vscode-workspace-trust",l.vscodeTerminal="vscode-terminal",l.vscodeChatCodeBlock="vscode-chat-code-block",l.vscodeCopilotBackingChatCodeBlock="vscode-copilot-chat-code-block",l.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",l.vscodeChatSesssion="vscode-chat-editor",l.webviewPanel="webview-panel",l.vscodeWebview="vscode-webview",l.extension="extension",l.vscodeFileResource="vscode-file",l.tmp="tmp",l.vsls="vsls",l.vscodeSourceControl="vscode-scm",l.commentsInput="comment",l.codeSetting="code-setting"})(y||(e.Schemas=y={}));function K(l,n){return g.URI.isUri(l)?(0,R.$Gf)(l.scheme,n):(0,R.$Hf)(l,n+":")}function L(l,...n){return n.some(c=>K(l,c))}e.$Qg="vscode-tkn",e.$Rg="tkn";class z{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(n){this.d=n}setDelegate(n){this.e=n}setServerRootPath(n,c){this.f=p(n,c)}getServerRootPath(){return this.f}get g(){return E.$ic.join(this.f,y.vscodeRemoteResource)}set(n,c,d){this.a[n]=c,this.b[n]=d}setConnectionToken(n,c){this.c[n]=c}getPreferredWebSchema(){return this.d}rewrite(n){if(this.e)try{return this.e(n)}catch(J){return k.$3(J),n}const c=n.authority;let d=this.a[c];d&&d.indexOf(":")!==-1&&d.indexOf("[")===-1&&(d=`[${d}]`);const D=this.b[c],f=this.c[c];let j=`path=${encodeURIComponent(n.path)}`;return typeof f=="string"&&(j+=`&${e.$Rg}=${encodeURIComponent(f)}`),g.URI.from({scheme:v.$o?this.d:y.vscodeRemoteResource,authority:`${d}:${D}`,path:this.g,query:j})}}e.$Sg=new z;function p(l,n){return E.$ic.join(n??"/",`${l.quality??"oss"}-${l.commit??"dev"}`)}e.$Ug="vs/../../extensions",e.$Vg="vs/../../node_modules",e.$Wg="vs/../../node_modules.asar",e.$Xg="vs/../../node_modules.asar.unpacked",e.$Yg="vscode-app";class X{static{this.a=e.$Yg}asBrowserUri(n){const c=this.b(n,Q);return this.uriToBrowserUri(c)}uriToBrowserUri(n){return n.scheme===y.vscodeRemote?e.$Sg.rewrite(n):n.scheme===y.file&&(v.$m||v.$q===`${y.vscodeFileResource}://${X.a}`)?n.with({scheme:y.vscodeFileResource,authority:n.authority||X.a,query:null,fragment:null}):n}asFileUri(n){const c=this.b(n,Q);return this.uriToFileUri(c)}uriToFileUri(n){return n.scheme===y.vscodeFileResource?n.with({scheme:y.file,authority:n.authority!==X.a?n.authority:null,query:null,fragment:null}):n}b(n,c){return g.URI.isUri(n)?n:g.URI.parse(c.toUrl(n))}}e.$Zg=new X;var te;(function(l){const n=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);l.CoopAndCoep=Object.freeze(n.get("3"));const c="vscode-coi";function d(f){let j;typeof f=="string"?j=new URL(f).searchParams:f instanceof URL?j=f.searchParams:g.URI.isUri(f)&&(j=new URL(f.toString(!0)).searchParams);const J=j?.get(c);if(J)return n.get(J)}l.getHeadersFromQuery=d;function D(f,j,J){if(!globalThis.crossOriginIsolated)return;const P=j&&J?"3":J?"2":"1";f instanceof URLSearchParams?f.set(c,P):f[c]=P}l.addSearchParam=D})(te||(e.COI=te={}))}),define(ue[8],he([0,1,6,5,12,2,3,4,7]),function(Q,e,k,v,R,g,E,y,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataUri=e.$oh=e.$nh=e.$mh=e.$lh=e.$kh=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=void 0,e.$7g=L,e.$ph=p,e.$qh=te,v=de(v),g=de(g);function L(l){return(0,K.$yc)(l,!0)}class z{constructor(n){this.a=n}compare(n,c,d=!1){return n===c?0:(0,y.$zf)(this.getComparisonKey(n,d),this.getComparisonKey(c,d))}isEqual(n,c,d=!1){return n===c?!0:!n||!c?!1:this.getComparisonKey(n,d)===this.getComparisonKey(c,d)}getComparisonKey(n,c=!1){return n.with({path:this.a(n)?n.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(n){return this.a(n)}isEqualOrParent(n,c,d=!1){if(n.scheme===c.scheme){if(n.scheme===R.Schemas.file)return v.$Eg(L(n),L(c),this.a(n))&&n.query===c.query&&(d||n.fragment===c.fragment);if((0,e.$lh)(n.authority,c.authority))return v.$Eg(n.path,c.path,this.a(n),"/")&&n.query===c.query&&(d||n.fragment===c.fragment)}return!1}joinPath(n,...c){return K.URI.joinPath(n,...c)}basenameOrAuthority(n){return(0,e.$dh)(n)||n.authority}basename(n){return g.$ic.basename(n.path)}extname(n){return g.$ic.extname(n.path)}dirname(n){if(n.path.length===0)return n;let c;return n.scheme===R.Schemas.file?c=K.URI.file(g.$oc(L(n))).path:(c=g.$ic.dirname(n.path),n.authority&&c.length&&c.charCodeAt(0)!==k.CharCode.Slash&&(console.error(`dirname("${n.toString})) resulted in a relative path`),c="/")),n.with({path:c})}normalizePath(n){if(!n.path.length)return n;let c;return n.scheme===R.Schemas.file?c=K.URI.file(g.$jc(L(n))).path:c=g.$ic.normalize(n.path),n.with({path:c})}relativePath(n,c){if(n.scheme!==c.scheme||!(0,e.$lh)(n.authority,c.authority))return;if(n.scheme===R.Schemas.file){const f=g.$nc(L(n),L(c));return E.$i?v.$yg(f):f}let d=n.path||"/";const D=c.path||"/";if(this.a(n)){let f=0;for(const j=Math.min(d.length,D.length);f<j&&!(d.charCodeAt(f)!==D.charCodeAt(f)&&d.charAt(f).toLowerCase()!==D.charAt(f).toLowerCase());f++);d=D.substr(0,f)+d.substr(f)}return g.$ic.relative(d,D)}resolvePath(n,c){if(n.scheme===R.Schemas.file){const d=K.URI.file(g.$mc(L(n),c));return n.with({authority:d.authority,path:d.path})}return c=v.$zg(c),n.with({path:g.$ic.resolve(n.path,c)})}isAbsolutePath(n){return!!n.path&&n.path[0]==="/"}isEqualAuthority(n,c){return n===c||n!==void 0&&c!==void 0&&(0,y.$Gf)(n,c)}hasTrailingPathSeparator(n,c=g.sep){if(n.scheme===R.Schemas.file){const d=L(n);return d.length>v.$Ag(d).length&&d[d.length-1]===c}else{const d=n.path;return d.length>1&&d.charCodeAt(d.length-1)===k.CharCode.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(n.fsPath)}}removeTrailingPathSeparator(n,c=g.sep){return(0,e.$mh)(n,c)?n.with({path:n.path.substr(0,n.path.length-1)}):n}addTrailingPathSeparator(n,c=g.sep){let d=!1;if(n.scheme===R.Schemas.file){const D=L(n);d=D!==void 0&&D.length===v.$Ag(D).length&&D[D.length-1]===c}else{c="/";const D=n.path;d=D.length===1&&D.charCodeAt(D.length-1)===k.CharCode.Slash}return!d&&!(0,e.$mh)(n,c)?n.with({path:n.path+"/"}):n}}e.$8g=z,e.$9g=new z(()=>!1),e.$0g=new z(l=>l.scheme===R.Schemas.file?!E.$k:!0),e.$$g=new z(l=>!0),e.$_g=e.$9g.isEqual.bind(e.$9g),e.$ah=e.$9g.isEqualOrParent.bind(e.$9g),e.$bh=e.$9g.getComparisonKey.bind(e.$9g),e.$ch=e.$9g.basenameOrAuthority.bind(e.$9g),e.$dh=e.$9g.basename.bind(e.$9g),e.$eh=e.$9g.extname.bind(e.$9g),e.$fh=e.$9g.dirname.bind(e.$9g),e.$gh=e.$9g.joinPath.bind(e.$9g),e.$hh=e.$9g.normalizePath.bind(e.$9g),e.$ih=e.$9g.relativePath.bind(e.$9g),e.$jh=e.$9g.resolvePath.bind(e.$9g),e.$kh=e.$9g.isAbsolutePath.bind(e.$9g),e.$lh=e.$9g.isEqualAuthority.bind(e.$9g),e.$mh=e.$9g.hasTrailingPathSeparator.bind(e.$9g),e.$nh=e.$9g.removeTrailingPathSeparator.bind(e.$9g),e.$oh=e.$9g.addTrailingPathSeparator.bind(e.$9g);function p(l,n){const c=[];for(let d=0;d<l.length;d++){const D=n(l[d]);l.some((f,j)=>j===d?!1:(0,e.$ah)(D,n(f)))||c.push(l[d])}return c}var X;(function(l){l.META_DATA_LABEL="label",l.META_DATA_DESCRIPTION="description",l.META_DATA_SIZE="size",l.META_DATA_MIME="mime";function n(c){const d=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(j=>{const[J,P]=j.split(":");J&&P&&d.set(J,P)});const f=c.path.substring(0,c.path.indexOf(";"));return f&&d.set(l.META_DATA_MIME,f),d}l.parseMetaData=n})(X||(e.DataUri=X={}));function te(l,n,c){if(n){let d=l.path;return d&&d[0]!==g.$ic.sep&&(d=g.$ic.sep+d),l.with({scheme:c,authority:n,path:d})}return l.with({scheme:c})}}),define(ue[9],he([0,1,14,13,18,19,8,3,11,20]),function(Q,e,k,v,R,g,E,y,K,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$9h=e.$7h=e.$6h=e.$5h=e.$4h=e.Promises=e.$3h=e.$2h=e.$1h=e.$Yh=e.$Xh=e.$Wh=e.$Vh=e.$Uh=e.$Th=e.$Sh=e.$Rh=e.$Qh=e.$Ph=e.$Oh=e.$Nh=e.$Mh=e.$Lh=e.$Fh=e.$Eh=e.$Dh=e.$Ch=e.$Bh=e.$Ah=e.$zh=void 0,e.$rh=z,e.$sh=p,e.$th=X,e.$uh=te,e.$vh=l,e.$wh=n,e.$xh=c,e.$yh=d,e.$Gh=_,e.$Hh=V,e.$Ih=s,e.$Jh=$,e.$Kh=B,e.$Zh=m,e.$8h=se;function z(o){return!!o&&typeof o.then=="function"}function p(o){const t=new k.$xe,i=o(t.token),r=new Promise((a,I)=>{const ne=t.token.onCancellationRequested(()=>{ne.dispose(),I(new v.$7)});Promise.resolve(i).then(le=>{ne.dispose(),t.dispose(),a(le)},le=>{ne.dispose(),t.dispose(),I(le)})});return new class{cancel(){t.cancel(),t.dispose()}then(a,I){return r.then(a,I)}catch(a){return this.then(void 0,a)}finally(a){return r.finally(a)}}}function X(o,t,i){return new Promise((r,a)=>{const I=t.onCancellationRequested(()=>{I.dispose(),r(i)});o.then(r,a).finally(()=>I.dispose())})}function te(o,t){return new Promise((i,r)=>{const a=t.onCancellationRequested(()=>{a.dispose(),r(new v.$7)});o.then(i,r).finally(()=>a.dispose())})}async function l(o){let t=-1;const i=o.map((r,a)=>r.then(I=>(t=a,I)));try{return await Promise.race(i)}finally{o.forEach((r,a)=>{a!==t&&r.cancel()})}}function n(o,t,i){let r;const a=setTimeout(()=>{r?.(void 0),i?.()},t);return Promise.race([o.finally(()=>clearTimeout(a)),new Promise(I=>r=I)])}function c(o){return new Promise((t,i)=>{const r=o();z(r)?r.then(t,i):t(r)})}function d(){let o,t;return{promise:new Promise((r,a)=>{o=r,t=a}),resolve:o,reject:t}}class D{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(i,i).then(r)})}return new Promise((i,r)=>{this.b.then(i,r)})}return this.a=t(),new Promise((i,r)=>{this.a.then(a=>{this.a=null,i(a)},a=>{this.a=null,r(a)})})}dispose(){this.f=!0}}e.$zh=D;class f{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$Ah=f;class j{constructor(){this.a=new Map}queue(t,i){const a=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===a&&this.a.delete(t)});return this.a.set(t,a),a}}e.$Bh=j;const J=(o,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},o);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},P=o=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,o())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class F{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((a,I)=>{this.d=a,this.f=I}).then(()=>{if(this.b=null,this.d=null,this.g){const a=this.g;return this.g=null,a()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=i===K.$he?P(r):J(i,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new v.$7),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$Ch=F;class S{constructor(t){this.a=new F(t),this.b=new D}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$Dh=S;class H{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$Eh=H;class ee extends H{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$Fh=ee;function _(o,t){return t?new Promise((i,r)=>{const a=setTimeout(()=>{I.dispose(),i()},o),I=t.onCancellationRequested(()=>{clearTimeout(a),I.dispose(),r(new v.$7)})}):p(i=>_(o,i))}function V(o,t=0,i){const r=setTimeout(()=>{o(),i&&a.dispose()},t),a=(0,g.$Uc)(()=>{clearTimeout(r),i?.deleteAndLeak(a)});return i?.add(a),a}function s(o){const t=[];let i=0;const r=o.length;function a(){return i<r?o[i++]():null}function I(ne){ne!=null&&t.push(ne);const le=a();return le?le.then(I):Promise.resolve(t)}return Promise.resolve(null).then(I)}function $(o,t=r=>!!r,i=null){let r=0;const a=o.length,I=()=>{if(r>=a)return Promise.resolve(i);const ne=o[r++];return Promise.resolve(ne()).then(ge=>t(ge)?Promise.resolve(ge):I())};return I()}function B(o,t=r=>!!r,i=null){if(o.length===0)return Promise.resolve(i);let r=o.length;const a=()=>{r=-1;for(const I of o)I.cancel?.()};return new Promise((I,ne)=>{for(const le of o)le.then(ge=>{--r>=0&&t(ge)?(a(),I(ge)):r===0&&I(i)}).catch(ge=>{--r>=0&&(a(),ne(ge))})})}class U{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new R.$me}whenIdle(){return this.size>0?R.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((i,r)=>{this.g.push({factory:t,c:i,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$Lh=U;class G extends U{constructor(){super(1)}}e.$Mh=G;class q{constructor(){this.a=new u,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$Nh=q;class Y{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new A;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,i=E.$9g){const r=i.getComparisonKey(t);return this.a.get(r)?.size??0}queueFor(t,i,r=E.$9g){const a=r.getComparisonKey(t);let I=this.a.get(a);if(!I){I=new G;const ne=this.f++,le=R.Event.once(I.onDrained)(()=>{I?.dispose(),this.a.delete(a),this.h(),this.d?.deleteAndDispose(ne),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new g.$6c),this.d.set(ne,le),this.a.set(a,I)}return I.queue(i)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$Oh=Y;class re{constructor(t,i){this.b=!1,this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel(),this.b=!0}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){if(this.b)throw new v.$eb("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){if(this.b)throw new v.$eb("Calling 'setIfNotSet' on a disposed TimeoutTimer");this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$Ph=re;class fe{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,i,r=globalThis){if(this.f)throw new v.$eb("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const a=r.setInterval(()=>{t()},i);this.d=(0,g.$Uc)(()=>{r.clearInterval(a),this.d=void 0})}dispose(){this.cancel(),this.f=!0}}e.$Qh=fe;class W{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$Rh=W;class ie{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$Sh=ie;class x extends W{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$Th=x;class ce extends g.$Wc{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new g.$Xc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new W(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$Uh=ce,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$Wh=(o,t)=>{(0,y.$B)(()=>{if(i)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.$Wh=(o,t,i)=>{const r=o.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let a=!1;return{dispose(){a||(a=!0,o.cancelIdleCallback(r))}}},e.$Vh=o=>(0,e.$Wh)(globalThis,o)}();class ae{constructor(t,i){this.g=!1,this.d=()=>{try{this.j=i()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$Wh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$Xh=ae;class h extends ae{constructor(t){super(globalThis,t)}}e.$Yh=h;async function m(o,t,i){let r;for(let a=0;a<i;a++)try{return await o()}catch(I){r=I,await _(t)}throw r}class u{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,i,r){return this.a={taskId:t,cancel:()=>r?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{const{promise:i,resolve:r,reject:a}=d();this.b={run:t,promise:i,promiseResolve:r,promiseReject:a}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$1h=u;class C{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$2h=C;var b;(function(o){o[o.Resolved=0]="Resolved",o[o.Rejected=1]="Rejected"})(b||(b={}));class A{get isRejected(){return this.d?.outcome===b.Rejected}get isResolved(){return this.d?.outcome===b.Resolved}get isSettled(){return!!this.d}get value(){return this.d?.outcome===b.Resolved?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:b.Resolved,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:b.Rejected,value:t},i()})}cancel(){return this.error(new v.$7)}}e.$3h=A;var N;(function(o){async function t(r){let a;const I=await Promise.all(r.map(ne=>ne.then(le=>le,le=>{a||(a=le)})));if(typeof a<"u")throw a;return I}o.settled=t;function i(r){return new Promise(async(a,I)=>{try{await r(a,I)}catch(ne){I(ne)}})}o.withAsyncBody=i})(N||(e.Promises=N={}));class w{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(i=>(this.a=i,this.d=!0,i),i=>{throw this.b=i,this.d=!0,i})}requireValue(){if(!this.d)throw new v.$eb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$4h=w;class O{constructor(t){this.b=t,this.a=new L.$X(()=>new w(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$5h=O;var M;(function(o){o[o.Initial=0]="Initial",o[o.DoneOK=1]="DoneOK",o[o.DoneError=2]="DoneError"})(M||(M={}));class T{static fromArray(t){return new T(i=>{i.emitMany(t)})}static fromPromise(t){return new T(async i=>{i.emitMany(await t)})}static fromPromises(t){return new T(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new T(async i=>{await Promise.all(t.map(async r=>{for await(const a of r)i.emitOne(a)}))})}static{this.EMPTY=T.fromArray([])}constructor(t,i){this.a=M.Initial,this.b=[],this.d=null,this.f=i,this.g=new R.$me,queueMicrotask(async()=>{const r={emitOne:a=>this.h(a),emitMany:a=>this.j(a),reject:a=>this.l(a)};try{await Promise.resolve(t(r)),this.k()}catch(a){this.l(a)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===M.DoneError)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===M.DoneOK)return{done:!0,value:void 0};await R.Event.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new T(async r=>{for await(const a of t)r.emitOne(i(a))})}map(t){return T.map(this,t)}static filter(t,i){return new T(async r=>{for await(const a of t)i(a)&&r.emitOne(a)})}filter(t){return T.filter(this,t)}static coalesce(t){return T.filter(t,i=>!!i)}coalesce(){return T.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return T.toPromise(this)}h(t){this.a===M.Initial&&(this.b.push(t),this.g.fire())}j(t){this.a===M.Initial&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===M.Initial&&(this.a=M.DoneOK,this.g.fire())}l(t){this.a===M.Initial&&(this.a=M.DoneError,this.d=t,this.g.fire())}}e.$6h=T;class Z extends T{constructor(t,i){super(i),this.m=t}cancel(){this.m.cancel()}}e.$7h=Z;function se(o){const t=new k.$xe,i=o(t.token);return new Z(t,async r=>{const a=t.token.onCancellationRequested(()=>{a.dispose(),t.dispose(),r.reject(new v.$7)});try{for await(const I of i){if(t.token.isCancellationRequested)return;r.emitOne(I)}a.dispose(),t.dispose()}catch(I){a.dispose(),t.dispose(),r.reject(I)}})}class oe{constructor(t){this.a=new A,this.b=new T(a=>{if(i){a.reject(i);return}return r&&a.emitMany(r),this.d=I=>a.reject(I),this.f=I=>a.emitOne(I),this.a.p},t);let i,r;this.f=a=>{r||(r=[]),r.push(a)},this.d=a=>{i||(i=a)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$9h=oe}),define(ue[10],he([0,1,21,9,6,5,22,2,3,4]),function(Q,e,k,v,R,g,E,y,K,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$wk=e.$vk=void 0,e.$uk=z,e.$xk=n,e.$yk=q,e.$zk=Y,e.$Ak=re,e.$Bk=fe,e.$Ck=W,e.$Dk=ae;function z(){return Object.create(null)}e.$vk="**",e.$wk="/";const p="[/\\\\]",X="[^/\\\\]",te=/\//g;function l(h,m){switch(h){case 0:return"";case 1:return`${X}*?`;default:return`(?:${p}|${X}+${p}${m?`|${p}${X}+`:""})*?`}}function n(h,m){if(!h)return[];const u=[];let C=!1,b=!1,A="";for(const N of h){switch(N){case m:if(!C&&!b){u.push(A),A="";continue}break;case"{":C=!0;break;case"}":C=!1;break;case"[":b=!0;break;case"]":b=!1;break}A+=N}return A&&u.push(A),u}function c(h){if(!h)return"";let m="";const u=n(h,e.$wk);if(u.every(C=>C===e.$vk))m=".*";else{let C=!1;u.forEach((b,A)=>{if(b===e.$vk){if(C)return;m+=l(2,A===u.length-1)}else{let N=!1,w="",O=!1,M="";for(const T of b){if(T!=="}"&&N){w+=T;continue}if(O&&(T!=="]"||!M)){let Z;T==="-"?Z=T:(T==="^"||T==="!")&&!M?Z="^":T===e.$wk?Z="":Z=(0,L.$if)(T),M+=Z;continue}switch(T){case"{":N=!0;continue;case"[":O=!0;continue;case"}":{const se=`(?:${n(w,",").map(oe=>c(oe)).join("|")})`;m+=se,N=!1,w="";break}case"]":{m+="["+M+"]",O=!1,M="";break}case"?":m+=X;continue;case"*":m+=l(1);continue;default:m+=(0,L.$if)(T)}}A<u.length-1&&(u[A+1]!==e.$vk||A+2<u.length)&&(m+=p)}C=b===e.$vk})}return m}const d=/^\*\*\/\*\.[\w\.-]+$/,D=/^\*\*\/([\w\.-]+)\/?$/,f=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,j=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,J=/^\*\*((\/[\w\.-]+)+)\/?$/,P=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,F=new E.$Fc(1e4),S=function(){return!1},H=function(){return null};function ee(h,m){if(!h)return H;let u;typeof h!="string"?u=h.pattern:u=h,u=u.trim();const C=`${u}_${!!m.trimForExclusions}`;let b=F.get(C);if(b)return _(b,h);let A;return d.test(u)?b=s(u.substr(4),u):(A=D.exec(V(u,m)))?b=$(A[1],u):(m.trimForExclusions?j:f).test(u)?b=B(u,m):(A=J.exec(V(u,m)))?b=U(A[1].substr(1),u,!0):(A=P.exec(V(u,m)))?b=U(A[1],u,!1):b=G(u),F.set(C,b),_(b,h)}function _(h,m){if(typeof m=="string")return h;const u=function(C,b){return(0,g.$Eg)(C,m.base,!K.$k)?h((0,L.$nf)(C.substr(m.base.length),y.sep),b):null};return u.allBasenames=h.allBasenames,u.allPaths=h.allPaths,u.basenames=h.basenames,u.patterns=h.patterns,u}function V(h,m){return m.trimForExclusions&&h.endsWith("/**")?h.substr(0,h.length-2):h}function s(h,m){return function(u,C){return typeof u=="string"&&u.endsWith(h)?m:null}}function $(h,m){const u=`/${h}`,C=`\\${h}`,b=function(N,w){return typeof N!="string"?null:w?w===h?m:null:N===h||N.endsWith(u)||N.endsWith(C)?m:null},A=[h];return b.basenames=A,b.patterns=[m],b.allBasenames=A,b}function B(h,m){const u=ce(h.slice(1,-1).split(",").map(w=>ee(w,m)).filter(w=>w!==H),h),C=u.length;if(!C)return H;if(C===1)return u[0];const b=function(w,O){for(let M=0,T=u.length;M<T;M++)if(u[M](w,O))return h;return null},A=u.find(w=>!!w.allBasenames);A&&(b.allBasenames=A.allBasenames);const N=u.reduce((w,O)=>O.allPaths?w.concat(O.allPaths):w,[]);return N.length&&(b.allPaths=N),b}function U(h,m,u){const C=y.sep===y.$ic.sep,b=C?h:h.replace(te,y.sep),A=y.sep+b,N=y.$ic.sep+h;let w;return u?w=function(O,M){return typeof O=="string"&&(O===b||O.endsWith(A)||!C&&(O===h||O.endsWith(N)))?m:null}:w=function(O,M){return typeof O=="string"&&(O===b||!C&&O===h)?m:null},w.allPaths=[(u?"*/":"./")+h],w}function G(h){try{const m=new RegExp(`^${c(h)}$`);return function(u){return m.lastIndex=0,typeof u=="string"&&m.test(u)?h:null}}catch{return H}}function q(h,m,u){return!h||typeof m!="string"?!1:Y(h)(m,void 0,u)}function Y(h,m={}){if(!h)return S;if(typeof h=="string"||re(h)){const u=ee(h,m);if(u===H)return S;const C=function(b,A){return!!u(b,A)};return u.allBasenames&&(C.allBasenames=u.allBasenames),u.allPaths&&(C.allPaths=u.allPaths),C}return ie(h,m)}function re(h){const m=h;return m?typeof m.base=="string"&&typeof m.pattern=="string":!1}function fe(h){return h.allBasenames||[]}function W(h){return h.allPaths||[]}function ie(h,m){const u=ce(Object.getOwnPropertyNames(h).map(w=>x(w,h[w],m)).filter(w=>w!==H)),C=u.length;if(!C)return H;if(!u.some(w=>!!w.requiresSiblings)){if(C===1)return u[0];const w=function(T,Z){let se;for(let oe=0,o=u.length;oe<o;oe++){const t=u[oe](T,Z);if(typeof t=="string")return t;(0,v.$rh)(t)&&(se||(se=[]),se.push(t))}return se?(async()=>{for(const oe of se){const o=await oe;if(typeof o=="string")return o}return null})():null},O=u.find(T=>!!T.allBasenames);O&&(w.allBasenames=O.allBasenames);const M=u.reduce((T,Z)=>Z.allPaths?T.concat(Z.allPaths):T,[]);return M.length&&(w.allPaths=M),w}const b=function(w,O,M){let T,Z;for(let se=0,oe=u.length;se<oe;se++){const o=u[se];o.requiresSiblings&&M&&(O||(O=(0,y.$pc)(w)),T||(T=O.substr(0,O.length-(0,y.$qc)(w).length)));const t=o(w,O,T,M);if(typeof t=="string")return t;(0,v.$rh)(t)&&(Z||(Z=[]),Z.push(t))}return Z?(async()=>{for(const se of Z){const oe=await se;if(typeof oe=="string")return oe}return null})():null},A=u.find(w=>!!w.allBasenames);A&&(b.allBasenames=A.allBasenames);const N=u.reduce((w,O)=>O.allPaths?w.concat(O.allPaths):w,[]);return N.length&&(b.allPaths=N),b}function x(h,m,u){if(m===!1)return H;const C=ee(h,u);if(C===H)return H;if(typeof m=="boolean")return C;if(m){const b=m.when;if(typeof b=="string"){const A=(N,w,O,M)=>{if(!M||!C(N,w))return null;const T=b.replace("$(basename)",()=>O),Z=M(T);return(0,v.$rh)(Z)?Z.then(se=>se?h:null):Z?h:null};return A.requiresSiblings=!0,A}}return C}function ce(h,m){const u=h.filter(w=>!!w.basenames);if(u.length<2)return h;const C=u.reduce((w,O)=>{const M=O.basenames;return M?w.concat(M):w},[]);let b;if(m){b=[];for(let w=0,O=C.length;w<O;w++)b.push(m)}else b=u.reduce((w,O)=>{const M=O.patterns;return M?w.concat(M):w},[]);const A=function(w,O){if(typeof w!="string")return null;if(!O){let T;for(T=w.length;T>0;T--){const Z=w.charCodeAt(T-1);if(Z===R.CharCode.Slash||Z===R.CharCode.Backslash)break}O=w.substr(T)}const M=C.indexOf(O);return M!==-1?b[M]:null};A.basenames=C,A.patterns=b,A.allBasenames=C;const N=h.filter(w=>!w.basenames);return N.push(A),N}function ae(h,m){return(0,k.$wb)(h,m,(u,C)=>typeof u=="string"&&typeof C=="string"?u===C:typeof u!="string"&&typeof C!="string"?u.base===C.base&&u.pattern===C.pattern:!1)}}),define(ue[15],he([0,1,23]),function(Q,e,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$vtc=void 0;const v=(R,g,E)=>{let y;if(R[0]===255&&R[1]===254)y=new TextDecoder("utf-16le").decode(R);else if(R[0]===254&&R[1]===255)y=new TextDecoder("utf-16be").decode(R);else if(y=new TextDecoder("utf8").decode(R),y.slice(0,1e3).includes("\uFFFD")&&R.includes(0))return[];const K=[],L=[];let z=null,p=E.remainingResultQuota;for(;p>=0&&(z=g.exec(y));)L.push({matchStartIndex:z.index,matchedText:z[0]}),p--;if(L.length){const X=new Set,te=new Set,l=[],n=j=>y.slice(l[j].start,l[j].end);let c=0,d=null;const D=/\r?\n/g;for(;d=D.exec(y);)l.push({start:c,end:d.index}),c=d.index+d[0].length;c<y.length&&l.push({start:c,end:y.length});let f=0;for(const{matchStartIndex:j,matchedText:J}of L){if(p<0)break;for(;l[f+1]&&j>l[f].end;)f++;let P=f;for(;l[P+1]&&j+J.length>l[P].end;)P++;if(E.beforeContext)for(let V=Math.max(0,f-E.beforeContext);V<f;V++)X.add(V);let F="",S=0;for(let V=f;V<=P;V++){let s=n(V);E.previewOptions?.charsPerLine&&s.length>E.previewOptions.charsPerLine&&(S=Math.max(j-l[f].start-20,0),s=s.substr(S,E.previewOptions.charsPerLine)),F+=`${s}
`,te.add(V)}const H=new k.$Ht(f,j-l[f].start,P,j+J.length-l[P].start),ee=new k.$Ht(0,j-l[f].start-S,P-f,j+J.length-l[P].start-(P===f?S:0)),_={ranges:H,preview:{text:F,matches:ee}};if(K.push(_),E.afterContext)for(let V=P+1;V<=Math.min(P+E.afterContext,l.length-1);V++)X.add(V)}for(const j of X)te.has(j)||K.push({text:n(j),lineNumber:j+1})}return K};e.$vtc=v}),define(ue[16],he([0,1,10]),function(Q,e,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$psb=void 0,k=de(k);class v{constructor(g,E,y){if(this.b=E,this.c=y,E[E.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");E[E.length-1]!=="/"&&(E+="/"),this.a=this.e(g,this.b,this.c)}updateContents(g){this.a=this.e(g,this.b,this.c)}isPathIncludedInTraversal(g,E){if(g[0]!=="/"||g[g.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+g);return!this.a(g,E)}isArbitraryPathIgnored(g,E){if(g[0]!=="/"||g[g.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+g);const y=g.split("/").filter(z=>z);let K=!1,L="";for(let z=0;z<y.length;z++){const p=z===y.length-1,X=y[z];if(L=L+"/"+X,!this.isPathIncludedInTraversal(L,p?E:!0)){K=!0;break}}return K}d(g,E,y){const K=g.map(z=>this.f(z,E)),L=Object.create(null);for(const z of K)L[z]=!0;return k.$zk(L,{trimForExclusions:y})}e(g,E,y){const K=g.split(`
`).map(f=>f.trim()).filter(f=>f&&f[0]!=="#"),L=K.filter(f=>!f.endsWith("/")),z=L.filter(f=>!f.includes("!")),p=this.d(z,E,!0),X=L.filter(f=>f.includes("!")).map(f=>f.replace(/!/g,"")),te=this.d(X,E,!1),l=K.filter(f=>!f.includes("!")),n=this.d(l,E,!0),c=K.filter(f=>f.includes("!")).map(f=>f.replace(/!/g,"")),d=this.d(c,E,!1);return(f,j)=>f.startsWith(E)?j&&n(f)&&!d(f)||p(f)&&!te(f)?!0:y?y.a(f,j):!1:!1}f(g,E){const y=g.indexOf("/");return y===-1||y===g.length-1?g="**/"+g:(y===0?E.slice(-1)==="/"&&(g=g.slice(1)):E.slice(-1)!=="/"&&(g="/"+g),g=E+g),g}}e.$psb=v}),define(ue[24],he([0,1,10,7,2,14,15,16,4,9,8]),function(Q,e,k,v,R,g,E,y,K,L,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=void 0,e.create=n,k=de(k),R=de(R);const p=!1,X=+new Date,te={},l=async(P,F)=>{if(!p)return F();const S=Date.now(),H=(te[P]??0)+1;console.info(P,H,"starting",Math.round((S-X)*10)/1e4),te[P]=H;const ee=await F(),_=Date.now();return console.info(P,H,"took",_-S),ee};function n(P){return new c(P)}class c{constructor(F){this.d=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}g(F){const S=new g.$xe;return this.cancellationTokens.set(F,S),S}async listDirectory(F,S,H,ee,_){const V=D(H),s=new z.$8g(()=>ee),$=this.g(_),B=[];let U=!1,G=0;const q=S.maxResults||512,Y=S.filePattern?re=>S.filePattern.split("").every(fe=>re.includes(fe)):re=>!0;return await l("listDirectory",()=>this.h(F,f(S),V,s,re=>{if(Y(re.name))return G++,q&&G>q&&(U=!0,$.cancel()),B.push(re.path)},$.token)),{results:B,limitHit:U}}async searchDirectory(F,S,H,ee,_){const V=D(H),s=new z.$8g(()=>ee);return l("searchInFiles",async()=>{const $=this.g(_),B=[],U=d(S.contentPattern),G=[];let q=0,Y=0;const re=!1,fe=async W=>{if($.token.isCancellationRequested)return;q++;const ie=await W.resolve();if($.token.isCancellationRequested)return;const x=new Uint8Array(ie),ce=(0,E.$vtc)(x,U,{afterContext:S.afterContext??0,beforeContext:S.beforeContext??0,previewOptions:S.previewOptions,remainingResultQuota:S.maxResults?S.maxResults-Y:1e4});if(ce.length){Y+=ce.length,S.maxResults&&Y>S.maxResults&&$.cancel();const ae={resource:v.URI.joinPath(V.folder,W.path),results:ce};this.d.sendTextSearchMatch(ae,_),B.push(ae)}};return await l("walkFolderToResolve",()=>this.h(F,f(S),V,s,async W=>G.push(fe(W)),$.token)),await l("resolveOngoingProcesses",()=>Promise.all(G)),p&&console.log("Searched in",q,"files"),{results:B,limitHit:re}})}async h(F,S,H,ee,_,V){const s=k.$zk(H.excludePattern??{},{trimForExclusions:!0}),$=(W,ie,x)=>(W=W.slice(1),!!(s(W,ie,x)||j(S,W))),B=(W,ie,x)=>(W=W.slice(1),!(s(W,ie,x)||!J(S,W,ee))),U=(W,ie)=>({type:"file",name:W.name,path:ie,resolve:()=>W.getFile().then(ce=>ce.arrayBuffer())}),G=W=>W.kind==="directory",q=W=>W.kind==="file",Y=async(W,ie,x)=>{if(!H.disregardIgnoreFiles){const ae=await Promise.all([W.getFileHandle(".gitignore").catch(h=>{}),W.getFileHandle(".ignore").catch(h=>{})]);await Promise.all(ae.map(async h=>{if(!h)return;const m=new TextDecoder("utf8").decode(new Uint8Array(await(await h.getFile()).arrayBuffer()));x=new y.$psb(m,ie,x)}))}const ce=L.Promises.withAsyncBody(async ae=>{const h=[],m=[],u=[],C=new Set;for await(const b of W.entries())u.push(b),C.add(b[0]);for(const[b,A]of u){if(V.isCancellationRequested)break;const N=ie+b;if(x&&!x.isPathIncludedInTraversal(N,A.kind==="directory"))continue;const w=O=>C.has(O);G(A)&&!$(N,b,w)?m.push(Y(A,N+"/",x)):q(A)&&B(N,b,w)&&h.push(U(A,N))}ae([...await Promise.all(m),...h])});return{type:"dir",name:W.name,entries:ce}},re=async(W,ie)=>{V.isCancellationRequested||await Promise.all((await W.entries).sort((x,ce)=>-(x.type==="dir"?0:1)+(ce.type==="dir"?0:1)).map(async x=>x.type==="dir"?re(x,ie):ie(x)))},fe=await l("process",()=>Y(F,"/"));await l("resolve",()=>re(fe,_))}}e.LocalFileSearchSimpleWorker=c;function d(P){return(0,K.$rf)(P.pattern,!!P.isRegExp,{wholeWord:P.isWordMatch,global:!0,matchCase:P.isCaseSensitive,multiline:!0,unicode:!0})}function D(P){return{...P,folder:v.URI.revive(P.folder)}}function f(P){return{...P,extraFileResources:P.extraFileResources?.map(F=>v.URI.revive(F)),folderQueries:P.folderQueries.map(F=>D(F))}}function j(P,F){return!!(P.excludePattern&&k.$yk(P.excludePattern,F))}function J(P,F,S){return P.excludePattern&&k.$yk(P.excludePattern,F)?!1:P.includePattern||P.usingSearchPaths?P.includePattern&&k.$yk(P.includePattern,F)?!0:P.usingSearchPaths?!!P.folderQueries&&P.folderQueries.some(H=>{const ee=H.folder,_=v.URI.file(F);if(S.isEqualOrParent(_,ee)){const V=R.$nc(ee.path,_.path);return!H.includePattern||!!k.$yk(H.includePattern,V)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/c2e20cb17fae44eb26611cb9a4690059cea0e605/core/vs/workbench/services/search/worker/localFileSearch.js.map
